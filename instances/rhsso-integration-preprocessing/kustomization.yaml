apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - rbac.yaml
  - secretstore.yaml
  - sso-configs-es.yaml
  - keycloak-pre-processing-job.yaml

patches:
- target:
    group: external-secrets.io
    kind: SecretStore
    labelSelector: "sso-integration-component=preprocessing-secretstore"
  patch: |-
    - op: replace
      path: /spec/provider/vault/caBundle
      value: TUlJRHFUQ0NBcEdnQXdJQkFnSVFXMExuL1NxS2NncitRVzBCZlpLcjR6QU5CZ2txaGtpRzl3MEJBUXNGQURBbQpNU1F3SWdZRFZRUURFeHRqWVM1elpXeG1MWE5wWjI1bGNpNWpaWEowTFcxaGJtRm5aWEl3SGhjTk1qSXdNakEzCk1ETXlOakl3V2hjTk1qSXdOVEE0TURNeU5qSXdXakFRTVE0d0RBWURWUVFERXdWMllYVnNkRENDQVNJd0RRWUoKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTUg3ZDlzOENsaUYxcFAzZXdVcVBjZHVMNFpucWJ4cQpiakpaZ3NzR254U1ptbkp3aHQ2c1NnMVFCQWlOVzlZSWNSZmtpT25Mc2JNYWhidkcvRTRqWUdmb01TQjFyd3dOCmVEa2ZuNkZjaEE2OXRsM2ZMcjR1RjhiV2tMd1F4N0wyQ1hwY0gvYkMxa003SkdKQ2FOZDdMZ2txZjJyRVlXLysKY2oyVUcvMHhvOWxwMVNxMjJnUVM3amhEcHcwdUd4eU1oamVqUWZDYTJOZGhLUVpHSlZVRHpLNFM5bzM4N1RkdgpucmpCL0pWeEk5Zk9KMjdjallNQXJOYmNJWHcrODZTVHl2STNCQWRLOHpUb1NxRXdLN1cva2RLTTRRdEdSeDA0CmsxN1VIYmxud28rRkdjbnQ5Q2JOTytpZEtUaU9BbWk3WHdJWU1TTkF6OHNJbG9BWUt4M1czMDhDQXdFQUFhT0IKNkRDQjVUQVRCZ05WSFNVRUREQUtCZ2dyQmdFRkJRY0RBVEFNQmdOVkhSTUJBZjhFQWpBQU1COEdBMVVkSXdRWQpNQmFBRktGYWdVYnUzTm05d2lySWoyZW1Cb1BXdTBWS01JR2VCZ05WSFJFRWdaWXdnWk9DS25aaGRXeDBMbUZ3CmNITXVZWGR6TUM1dGRYUnBhSGxpY21sa1kyeHZkV1JyYVhSamFHVnVMbU52YllJcWRtRjFiSFF1WVhCd2N5NWgKZDNNeExtMTFkR2xvZVdKeWFXUmpiRzkxWkd0cGRHTm9aVzR1WTI5dGdpZDJZWFZzZEM1aGNIQnpMbUY2ZFhKbApNQzVoZW5WeVpUQXhMbWxpYldSdmFtOHdNUzVqYjIyQ0VIWmhkV3gwTG5OM2FXNXVaWGt1YVc4d0RRWUpLb1pJCmh2Y05BUUVMQlFBRGdnRUJBRzZkem8vRG5Dbko3akdsQUR6R2lmNFRSamlucFo5bXg1RlRwOURZaENybVFTenQKTlVKNWxmQ2ViNmNrSmhTeUVNbXk4VDRpemp3YUFpcFZCUXRZemVnYVlmY1VsNE9EWDV0Qk9hWDdpb3hjVWM2Qwpqa1lWTEs0YUJOdU1NRjZ2M1J3bzkyVXdhaC84WURGUTU4TXg0VjV1M1J5YXZPUmZtSHNnTFl3VDU4OGtGdDY3CmZjaUtEc1B3THZKS1lWSkZCbjRoMjVyVWt1L3ZLeFl4UlhhSUFoc2tDc2FUMldGTUFEazN0YkZtaFQ0VXZoa0wKK29DYXBudS9TYW8yMDN1NUZkdHNqRmFBVjZrNkpWSkxNODFxbnNDT1c5c2IyMlVOZDA3K3hQR3ZOR21aQkl3OApWL0lURXdCOWxVdHA3SHY5RjdUaExycGpBK3BIOGNLeXU3MkFqME09
    - op: replace
      path: /spec/provider/vault/server
      value: https://vault.apps.aws0.mutihybridcloudkitchen.com:443
